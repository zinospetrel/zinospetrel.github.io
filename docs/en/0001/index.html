<html>
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="/img/favicon.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Zino's Petrel - Softwares you may need!</title>
  <style>
body {
  margin: 0px;
  padding: 0px;
  background-color: black;
  color: black;
  background: url('/img/bg-staggered.png');
  font-family: monospace;
  font-size: 12px;
}

.zp_page {
  width: 640px;
  min-height: 800px;
  margin: 10px auto 10px auto;
  font-family: monospace;
  font-size: 12px;
  white-space: pre-wrap;
  padding: 5px;
  background-color: white;
  color: black;
  outline: solid 1px black;
  border-right: solid 1px black;
  border-bottom: solid 1px black;
}

.zp-hd-search-form {
  font-family: monospace;
  font-size: 12px;
  color: black;
  white-space: pre-wrap;
}

.zp-text {
  font-family: monospace;
  font-size: 12px;
  color: black;
  
  margin-top: 5px;
  
  padding: 2px 5px 2px 5px;
  
  outline: solid 1px black;
  border-right: solid 1px black;
  border-bottom: solid 1px black;
  border-top: solid 1px black;

  border-left-color: transparent;
  border-left-style: solid;
  border-left-width: 15px;
  border-image-source: url('/img/wtitlebar.png');
  border-image-slice: 10% 0% 10% 10%;
  border-image-repeat: no-repeat;
}

.zp-button {
  font-family: monospace;
  font-size: 12px;
  color: black;
  background-color: white;
  cursor: pointer;
  cursor: hand;  

  padding: 2px 5px 2px 5px;
  
  outline: solid 1px black;
  border-right: solid 1px black;
  border-bottom: solid 1px black;
  border-top: solid 1px black;

  border-left-color: transparent;
  border-left-style: solid;
  border-left-width: 10px;

  border-right-color: transparent;
  border-right-style: solid;
  border-right-width: 5px;

  border-image-source: url('/img/wtitlebar.png');
  border-image-slice: 10% 10% 10% 10%;
  border-image-repeat: no-repeat;
}

.zp-hd-search-results {
  font-family: monospace;
  font-size: 12px;
  color: black;
  white-space: pre-wrap;
  margin-top: 20px;
}

.zp-search-item {
  font-family: monospace;
  font-size: 12px;
  padding-bottom: 20px;
}

.zp-search-item .zp-search-item-desc {
  font-family: monospace;
  font-size: 12px;
  padding-bottom: 5px;
}
    
.zp-search-item .zp-search-item-title {
  font-family: monospace;
  font-size: 12px;
  //padding-bottom: 5px;
  font-weight: bold;
  
  padding: 2px 5px 2px 5px;
  margin-bottom: 5px;
  
  outline: dotted 1px black;

  border-left-color: transparent;
  border-left-style: solid;
  border-left-width: 10px;

  border-right-color: transparent;
  border-right-style: solid;
  border-right-width: 5px;

  border-image-source: url('/img/wtitlebar.png');
  border-image-slice: 10% 10% 0% 10%;
  border-image-repeat: no-repeat;  
}

.zp-search-item .zp-search-item-updated {
  font-family: monospace;
  font-size: 12px;
  border-top: dotted 1px gainsboro;
  padding-top: 5px;
  padding-bottom: 5px;
}

.zp-search-item .zp-search-item-price {
  font-family: monospace;
  font-size: 12px;
  border-top: dotted 1px gainsboro;
  padding-top: 5px;
  padding-bottom: 5px;
  color: red;
  font-weight: bold;
}

.zp-search-item .zp-search-item-tag {
  font-family: monospace;
  font-size: 12px;
  border-top: dotted 1px gainsboro;
  padding-top: 5px;
  padding-bottom: 5px;
}

.zp-search-item .zp-search-item-tag span {
  font-family: monospace;
  font-size: 12px;
  font-family: Arial, sans-serif;
  font-size: 14px;
  color: black;
  background-color: white;
  //cursor: pointer;
  //cursor: hand;  

  padding: 2px 5px 2px 5px;
  
  outline: solid 1px black;
  border-right: solid 1px black;
  border-bottom: solid 1px black;
  border-top: solid 1px black;

  border-left-color: transparent;
  border-left-style: solid;
  border-left-width: 1px;

  border-right-color: transparent;
  border-right-style: solid;
  border-right-width: 5px;

  border-image-source: url('/img/wtitlebar.png');
  border-image-slice: 10% 10% 10% 0%;
  border-image-repeat: no-repeat;
}
    
.zp-ad-left {
  font-family: monospace;
  font-size: 12px;
  position: absolute;
  width: 1px;
  height: 1px;
}

.zp-ad-left .zp-ad-left-inner {
  font-family: monospace;
  font-size: 12px;
  width: 121px;
  height: 601px;
  padding: 5px;
  position: absolute;
  top: 0px;
  left: -145px;
}

.zp-ad-120x600 {
  font-family: monospace;
  font-size: 12px;
  width: 122px;
  height: 602px;
  border: solid 1px gainsboro;
  border-radius: 10px;
  background-color: white;
}

.zp-ad-right {
  font-family: monospace;
  font-size: 12px;
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

.zp-ad-right .zp-ad-right-inner {
  font-family: monospace;
  font-size: 12px;
  width: 121px;
  height: 601px;
  padding: 5px;
  position: absolute;
  top: 0px;
  left: 650px;
}

.zp-ad-left-frame {
  font-family: monospace;
  font-size: 12px;
  width: 120px;
  height: 600px;
  overflow: hidden;
}

.zp-ad-right-frame {
  font-family: monospace;
  font-size: 12px;
  width: 120px;
  height: 600px;
  overflow: hidden;
}

.zp-titlebar-cover {
  font-family: monospace;
  font-size: 12px;
  width: 1px;
  height: 1px;
  position: absolute;
}

.zp-titlebar span {
  font-family: monospace;
  font-size: 12px;
  padding-left: 1em;
  padding-right: 1em;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
  background-color: white;
  color: black;
  width: 300px;
  display: block;
}

.zp-titlebar-inner {
  font-family: monospace;
  font-size: 12px;
  width: 650px;
  height: 20px;
  position: absolute;
  top: -5px;
  left: -5px;
  border-bottom: solid 1px black;
  margin: 0px;
  padding: 0px;
}

.zp-titlebar {
  font-family: monospace;
  font-size: 12px;
  width: 99%;
  border-top: 3px solid transparent;
  border-bottom: 3px solid transparent;
  border-right: none;
  border-left: none;
  border-image-source: url('/img/wtitlebar.png');
  border-image-slice: 6 2 6 2 fill;
  border-image-repeat: round;
  height: 13px;
  line-height: 13px;
}

  </style>
  <script>
var g_all_tags = ['open_source', 'freeware', 'shareware', 'commercial', 'apk_dl'];
var g_docs_ads = false;
var g_docs_open_source = false;
var g_docs_shareware = false;
var g_docs_freeware = false;
var g_docs_commercial = false;
var g_docs_apk_dl = false;
var g_all_docs = [];
var g_docs = [];

var g_dict_docs = {};
var g_index_docs = {};
var g_keywords = [];
var g_latin = true;
var g_lang = 'en';
var g_obj = '0001';
var g_obj_codes = ['0001'];
var g_obj_names = ['software'];
var g_lang_all = ['en'];
var g_tag_def = 'apk_dl';
  </script>
  <script src="/en/0001/dat/ads.js"></script>
  <script src="/en/0001/dat/open_source.js"></script>
  <script src="/en/0001/dat/shareware.js"></script>
  <script src="/en/0001/dat/freeware.js"></script>
  <script src="/en/0001/dat/commercial.js"></script>
  <script src="/en/0001/dat/apk_dl.js"></script>
  <script>
function zp_pick_tag() {
  var v_tag = prompt('Your tag? [' + g_all_tags + ']');
  if (v_tag + '' == 'undefined' || v_tag + '' == 'null' || v_tag + '' == '') return;
  if (g_all_tags.indexOf(v_tag) < 0) {
    alert('Tag [ ' + v_tag + ' ] is not found!');
    return;
  }
  zp_tag_load(v_tag);
}
    
function zp_to_lower_vi(p_str) {
  var v_upper_table = ['Á', 'À', 'Ả', 'Ã', 'Ạ', 'Ă', 'Ắ', 'Ằ', 'Ẳ', 'Ẵ', 'Ặ', 'Â', 'Ấ', 'Ầ', 'Ẩ', 'Ẫ', 'Ậ', 'Ô', 'Ố', 'Ồ', 'Ổ', 'Ỗ', 'Ơ', 'Ớ', 'Ờ', 'Ở', 'Ỡ', 'Ợ', 'Ó', 'Ò', 'Ỏ', 'Õ', 'Ọ', 'É', 'È', 'Ẻ', 'Ẽ', 'Ẹ', 'Ê', 'Ế', 'Ề', 'Ể', 'Ễ', 'Ệ', 'Ú', 'Ù', 'Ủ', 'Ũ', 'Ụ', 'Ư', 'Ứ', 'Ừ', 'Ử', 'Ữ', 'Ự', 'Í', 'Ì', 'Ỉ', 'Ĩ', 'Ị', 'Ý', 'Ỳ', 'Ỷ', 'Ỹ', 'Ỵ', 'Đ'];
  var v_lower_table = ['á', 'à', 'ả', 'ã', 'ạ', 'ă', 'ắ', 'ằ', 'ẳ', 'ẵ', 'ặ', 'â', 'ấ', 'ầ', 'ẩ', 'ẫ', 'ậ', 'ô', 'ố', 'ồ', 'ổ', 'ỗ', 'ộ', 'ơ', 'ớ', 'ờ', 'ở', 'ỡ', 'ợ', 'ó', 'ò', 'ỏ', 'õ', 'ọ', 'é', 'è', 'ẻ', 'ẽ', 'ẹ', 'ê', 'ế', 'ề', 'ể', 'ễ', 'ệ', 'ú', 'ù', 'ủ', 'ũ', 'ụ', 'ư', 'ứ', 'ừ', 'ử', 'ữ', 'ự', 'í', 'ì', 'ỉ', 'ĩ', 'ị', 'ý', 'ỳ', 'ỷ', 'ỹ', 'ỵ', 'đ'];
  var v_lower = p_str.toLowerCase();
  if (v_upper_table.length == v_lower_table.length) {
    for (var i = 0; i < v_upper_table.length; i++) {
      var v_u = v_upper_table[i];
      var v_l = v_lower_table[i];
      v_lower = v_lower.replaceAll(v_u, v_l);
    }
    return v_lower;
  } else {
    console.log('==[ZP]==> Lower & upper table does not match!');
    return v_lower;
  }
}

function zp_to_lower_ja(p_str) {
  var v_upper_table = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
  var v_lower_table = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];
  var v_lower = p_str.toLowerCase();
  if (v_upper_table.length == v_lower_table.length) {
    for (var i = 0; i < v_upper_table.length; i++) {
      var v_u = v_upper_table[i];
      var v_l = v_lower_table[i];
      v_lower = v_lower.replaceAll(v_u, v_l);
    }
    return v_lower;
  } else {
    console.log('==[ZP]==> Lower & upper table does not match!');
    return v_lower;
  }
}

function zp_to_lower(p_str) {
  if (g_lang == 'vi') {
    return zp_to_lower_vi(p_str);
  } else if (g_lang == 'ja') {
    return zp_to_lower_ja(p_str);
  } else {
    return p_str.toLowerCase();
  }
}

function zp_rand_range(p_min, p_max) {
  return Math.round(Math.random() * (p_max - p_min) + p_min);
}

function zp_rand_kw() {
  var v_idx = zp_rand_range(0, g_keywords.length - 1);
  return g_keywords[v_idx];
}

function zp_fill_ads() {
  var v_kw_left = zp_rand_kw();
  var v_rsl = zp_do_find(v_kw_left, -1);
  var v_id_left = -1;
  if (v_rsl.length > 0) {
    v_id_left = v_rsl[0]['id'];
  }
  while (v_id_left < 0) {
    v_kw_left = zp_rand_kw();
    v_rsl = zp_do_find(v_kw_left, -1);
    if (v_rsl.length > 0) {
      v_id_left = v_rsl[0]['id'];
    }
  }
  
  var v_kw_right = zp_rand_kw();
  v_rsl = zp_do_find(v_kw_right, -1);
  var v_id_right = -1;
  if (v_rsl.length > 0) {
    v_id_right = v_rsl[0]['id'];
  }
  while (v_id_right < 0 || v_id_left == v_id_right) {
    v_kw_right = zp_rand_kw();
    v_rsl = zp_do_find(v_kw_right, -1);
    if (v_rsl.length > 0) {
      v_id_right = v_rsl[0]['id'];
    }
  }
  
  var v_web_lnk = '/' + g_lang + '/' + g_obj + '/ads/' + v_id_left + '.html';
  document.getElementById('zp-ad-left-frame').src = v_web_lnk;

  v_web_lnk = '/' + g_lang + '/' + g_obj + '/ads/' + v_id_right + '.html';
  document.getElementById('zp-ad-right-frame').src = v_web_lnk;
  
  setTimeout('zp_fill_ads()', 1000 * 30);
}

function zp_load() {
  setTimeout('zp_wait_to_load()', 1000 * 5);
}

function zp_loading_docs() {
  zp_loading_docs_ads();
}

function zp_loading_docs_ads() {
  var v_tag = 'ads';
  console.log("==[ZP]==> Checking g_docs_ads ...");
  if (g_docs_ads + '' !== 'false') {
    console.log("==[ZP]==> g_docs_ads is ready to load ...");
    for (var i = 0; i < g_docs_ads.length; i++) {
      var v_item = g_docs_ads[i];
      v_item['tag'] = v_tag;
      g_all_docs.push(v_item);
    }
    zp_loading_docs_open_source();
  } else {
    setTimeout('zp_loading_docs_ads()', 1000 * 5);
  }
}

function zp_loading_docs_open_source() {
  var v_tag = 'open_source';
  console.log("==[ZP]==> Checking g_docs_open_source ...");
  if (g_docs_open_source + '' !== 'false') {
    console.log("==[ZP]==> g_docs_open_source is ready to load ...");
    for (var i = 0; i < g_docs_open_source.length; i++) {
      var v_item = g_docs_open_source[i];
      v_item['tag'] = v_tag;
      g_all_docs.push(v_item);
    }
    zp_loading_docs_shareware();
  } else {
    setTimeout('zp_loading_docs_open_source()', 1000 * 5);
  }
}

function zp_loading_docs_shareware() {
  var v_tag = 'shareware';
  console.log("==[ZP]==> Checking g_docs_shareware ...");
  if (g_docs_shareware + '' !== 'false') {
    console.log("==[ZP]==> g_docs_shareware is ready to load ...");
    for (var i = 0; i < g_docs_shareware.length; i++) {
      var v_item = g_docs_shareware[i];
      v_item['tag'] = v_tag;
      g_all_docs.push(v_item);
    }
    zp_loading_docs_freeware();
  } else {
    setTimeout('zp_loading_docs_shareware()', 1000 * 5);
  }
}

function zp_loading_docs_freeware() {
  var v_tag = 'freeware';
  console.log("==[ZP]==> Checking g_docs_freeware ...");
  if (g_docs_freeware + '' !== 'false') {
    console.log("==[ZP]==> g_docs_freeware is ready to load ...");
    for (var i = 0; i < g_docs_freeware.length; i++) {
      var v_item = g_docs_freeware[i];
      v_item['tag'] = v_tag;
      g_all_docs.push(v_item);
    }
    zp_loading_docs_commercial();
  } else {
    setTimeout('zp_loading_docs_freeware()', 1000 * 5);
  }
}

function zp_loading_docs_commercial() {
  var v_tag = 'commercial';
  console.log("==[ZP]==> Checking g_docs_commercial ...");
  if (g_docs_commercial + '' !== 'false') {
    console.log("==[ZP]==> g_docs_commercial is ready to load ...");
    for (var i = 0; i < g_docs_commercial.length; i++) {
      var v_item = g_docs_commercial[i];
      v_item['tag'] = v_tag;
      g_all_docs.push(v_item);
    }
    zp_loading_docs_apk_dl();
  } else {
    setTimeout('zp_loading_docs_commercial()', 1000 * 5);
  }
}

function zp_loading_docs_apk_dl() {
  var v_tag = 'apk_dl';
  console.log("==[ZP]==> Checking g_docs_apk_dl ...");
  if (g_docs_apk_dl + '' !== 'false') {
    console.log("==[ZP]==> g_docs_apk_dl is ready to load ...");
    for (var i = 0; i < g_docs_apk_dl.length; i++) {
      var v_item = g_docs_apk_dl[i];
      v_item['tag'] = v_tag;
      g_all_docs.push(v_item);
    }
    zp_docs_loaded();
  } else {
    setTimeout('zp_loading_docs_apk_dl()', 1000 * 5);
  }
}

function zp_tag_load(p_tag) {
  var v_docs = [];
  for (var i = 0; i < g_all_docs.length; i++) {
    var v_item = g_all_docs[i];
    if (v_item['tag'] != p_tag) continue;
    v_docs.push(v_item);
  }
  for (var i = 0; i < g_all_docs.length; i++) {
    var v_item = g_all_docs[i];
    if (v_item['tag'] != 'ads') continue;
    v_docs.push(v_item);
  }
  g_docs = v_docs;
  zp_build_docs();
  zp_show_all();
}

function zp_tag_filter(p_tag_list, p_keyword) {
  var v_docs = [];
  for (var z = 0; z < p_tag_list.length; z++) {
    var v_tag = p_tag_list[z];
    if (v_tag == 'ads') continue;
    for (var i = 0; i < g_all_docs.length; i++) {
      var v_item = g_all_docs[i];
      if (v_item['tag'] != v_tag) continue;
      v_docs.push(v_item);
    }
  }
  for (var i = 0; i < g_all_docs.length; i++) {
    var v_item = g_all_docs[i];
    if (v_item['tag'] != 'ads') continue;
    v_docs.push(v_item);
  }
  g_docs = v_docs;
  zp_build_docs();
  zp_show_all(p_keyword);
}

function zp_docs_loaded() {
  zp_tag_filter(g_all_tags, 'zinospetrel');
  //zp_tag_load(g_tag_def);
  document.getElementById('zp-query').addEventListener('keydown', (event) => { zp_keyword_onchange(event); });
  zp_fill_ads();
}
    
function zp_wait_to_load() {
  zp_loading_docs()
}

function zp_split_en_jp(p_term) {
  var v_rs = [p_term];
  var v_echars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
  var v_term = p_term;
  for (var i = 0; i < v_echars.length; i++) {
    var v_ec = v_echars.substring(i, i+1);
    v_term = v_term.replaceAll(v_ec + '', '');
  }
  for (var i = 0; i < v_term.length; i++) {
    var v_c = v_term.substring(i, i+1);
    if (i == v_term.length - 1) {
      v_c = v_term.substring(i);
    }
    v_c = v_c.trim();
    if (v_c == '') continue;
    if ((v_c + '').length > 1) {
      var v_term_2 = v_c + '';
      for (var i = 0; i < v_term_2.length; i++) {
        var v_c = v_term_2.substring(i, i+1);
        if (i == v_term_2.length - 1) {
          v_c = v_term_2.substring(i);
        }
        v_c = v_c.trim();
        if (v_c == '') continue;
        v_rs.push(v_c);
      }
    } else {
      v_rs.push(v_c);
    }
  }
  return v_rs;
}
    
function zp_split_terms(p_sentence) {
  var v_sent = p_sentence + '';
  var v_chars = [',', '.', '<', '>', '?', '/', ':', ';', '"', "'", '{', '[', '}', ']', '|', '\\', "~", '`', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '-', '_', '+', '='];
  if (g_latin == false) {
    var v_sent_o = v_sent;
    v_sent = '';
    var v_latin = false;
    var v_abc = 'abcdefghijklmnopqrstuvwxyz0123456789、。()・（）、＆。、、';
    for (var i = 0; i < v_sent_o.length; i++) {
      var v_c = v_sent_o.substring(i, i+1);
      if (v_abc.indexOf(v_c.toLowerCase()) >= 0) {
        if (v_latin == false) {
          v_sent = v_sent + ' ';
        }
        v_sent = v_sent + v_c;
        v_latin = true;
      } else {
        if (v_latin == true) {
          v_sent = v_sent + ' ';
        }
        v_sent = v_sent + v_c;
        v_latin = false;
      }
    }
  }
  for (var i = 0; i < v_chars.length; i++) {
    v_sent = v_sent.replaceAll(v_chars[i] + '', ' ');
  }
  var v_arr = v_sent.split(' ');
  var v_narr = [];
  for (var i = 0; i < v_arr.length; i++) {
    var v_line = v_arr[i].trim();
    if (v_line == '') continue;
    if (g_latin) {
      var v_tm = zp_to_lower(v_line);
      if (v_narr.indexOf(v_tm) < 0) {
        v_narr.push(v_tm);
      }
    } else {
      var v_terms = zp_split_en_jp(zp_to_lower(v_line));
      for (var j = 0; j < v_terms.length; j++) {
        var v_tm = zp_to_lower(v_terms[j]);
        if (v_narr.indexOf(v_tm) < 0) {
          v_narr.push(v_tm);
        }
      }
    }
  }
  return v_narr;
}

function zp_build_index(p_sentence, p_id) {
  var v_terms = zp_split_terms(p_sentence);
  for (var i = 0; i < v_terms.length; i++) {
    var v_tm = v_terms[i];
    if (g_index_docs[v_tm] + '' === 'undefined') {
      g_index_docs[v_tm] = [p_id];
    } else {
      var v_iarr = g_index_docs[v_tm];
      if (v_iarr.indexOf(p_id) < 0) {
        v_iarr.push(p_id);
      }
      g_index_docs[v_tm] = v_iarr;
    }
  }
}

function zp_build_docs() {
  g_dict_docs = {};
  g_index_docs = {};
  g_keywords = [];
  for (var i = 0; i < g_docs.length; i++) {
    g_dict_docs[g_docs[i]['id']] = g_docs[i];
    var v_title = zp_to_lower(g_docs[i]['title']);
    zp_build_index(v_title, g_docs[i]['id']);
    var v_desc = zp_to_lower(g_docs[i]['description']);
    zp_build_index(v_desc, g_docs[i]['id']);
    var v_keyword_str = zp_to_lower(g_docs[i]['keyword']);
    var v_keyword_lst = v_keyword_str.split(',');
    for (var j = 0; j < v_keyword_lst.length; j++) {
      v_kw = v_keyword_lst[j].trim();
      if (g_keywords.indexOf(v_kw) < 0) {
        g_keywords.push(v_kw);
      }
    }
  } 
  g_keywords.sort();
}

function zp_do_find_terms(p_terms) {
  var v_ids = [];
  var v_nids = [];
  for (var i = 0; i < p_terms.length; i++) {
    var v_tm = p_terms[i];
    if (g_index_docs[v_tm] + '' !== 'undefined') {
      var v_cids = g_index_docs[v_tm];
      if (v_ids.length == 0) {
        for (var j = 0; j < v_cids.length; j++) {
          v_ids.push(v_cids[j]);
        }
      } else {
        v_nids = v_ids;
        v_ids = [];
        for (var j = 0; j < v_cids.length; j++) {
          var v_tid = v_cids[j];
          if (v_nids.indexOf(v_tid) >= 0) {
            v_ids.push(v_tid);
          }
        }
      }
    }
  }
  return v_ids;
}

function zp_get_all_terms_fixed(p_terms) {
  var v_terms_list = [];
  var v_sz = p_terms.length;
  var v_used = [];
  for (var i = 0; i < v_sz; i++) {
    v_terms_list.push([p_terms[i]]);
    var v_lterms = [p_terms[i]];
    for (var j = 0; j < v_sz; j++) {
      if (j <= i) continue;
      v_lterms.push(p_terms[j]);
      if (j < v_sz - 1) {
        var v_nterms = [];
        for (var k = 0; k < v_lterms.length; k++) {
          v_nterms.push(v_lterms[k]);
        }
        v_terms_list.push(v_nterms);
      }
    }
    if (v_lterms.length == 1 && i == v_sz - 1) {
      var debug = '';
    } else {
      v_terms_list.push(v_lterms);
    }
  }
  v_terms_list.sort((a, b) => b.length - a.length);
  return v_terms_list;
}

function zp_do_find(p_query, p_kind) {
  var v_terms = zp_split_terms(p_query);
  var v_ids = [];
  var v_terms_list = zp_get_all_terms_fixed(v_terms);
  for (var i = 0; i < v_terms_list.length; i++) {
    var v_lterms = v_terms_list[i];
    var v_tids = zp_do_find_terms(v_lterms);
    for (var j = 0; j < v_tids.length; j++) {
      var v_tid = v_tids[j];
      if (v_ids.indexOf(v_tid) < 0) {
        v_ids.push(v_tid);
      }
    }
  }

  var v_rsl = [];
  for (var i = 0; i < v_ids.length; i++) {
    var v_tid = v_ids[i];
    if (g_dict_docs[v_tid] + '' !== 'undefined') {
      if (p_kind < 0) {
        v_rsl.push(g_dict_docs[v_tid]);
      } else if (p_kind == g_dict_docs[v_tid]['kind']) {
        v_rsl.push(g_dict_docs[v_tid]);
      }
    }
  }
  return v_rsl;
}

function zp_find() {
  var v_query = zp_to_lower(document.getElementById('zp-query').value);
  if (v_query.length == 0) {
    zp_show_all();
    return;
  }
  zp_lookup(v_query);
}
    
function zp_lookup(p_query) {
  var v_query = p_query + '';
  var v_rsl = zp_do_find(v_query, 0);
  var v_html = '';
  for (var i = 0; i < v_rsl.length; i++) {
    var v_it = v_rsl[i];
    var v_no = i + 1;
    var v_et = '';
    var v_tag_div = '<div class="zp-search-item-tag"><span>' + v_it['tag'] + '</span></div>';
    if (v_price == '') {
      v_et = '<div class="zp-search-item"><div class="zp-search-item-title">' + v_no + '. <a target="_blank" href="' + v_it['link'] + '">' + v_it['title'] + '</a></div><div class="zp-search-item-desc">' + v_it['description'] + '</div><div class="zp-search-item-updated">' + v_it['updated'] + '</div>' + v_tag_div + '</div>';
    } else {
      v_et = '<div class="zp-search-item"><div class="zp-search-item-title">' + v_no + '. <a target="_blank" href="' + v_it['link'] + '">' + v_it['title'] + '</a></div><div class="zp-search-item-desc">' + v_it['description'] + '</div><div class="zp-search-item-price">' + v_price + '</div><div class="zp-search-item-updated">' + v_it['updated'] + '</div>' + v_tag_div + '</div>';
    }
    v_html += v_et;
  }
  document.getElementById('zp-hd-search-results').innerHTML = v_html + zp_powered_google_translate();
}

function zp_show_all(p_with_keyword = '') {
  var v_rsl = [];
  for (var i = 0; i < g_docs.length; i++) {
    if (g_docs[i]['kind'] != 0) continue;
    v_rsl.push(g_docs[i]);
  }
  var v_html = '';
  var v_no = 0;
  for (var i = 0; i < v_rsl.length; i++) {
    var v_it = v_rsl[i];
    if (v_it['kind'] != 0) continue;
    if (p_with_keyword != '') {
      if ((',' + v_it['keyword'] + ',').indexOf(',' + p_with_keyword + ',') < 0 ) continue;
    }
    v_no += 1;
    var v_price = v_it['price'];
    var v_et = '';
    var v_tag_div = '<div class="zp-search-item-tag"><span>' + v_it['tag'] + '</span></div>';
    if (v_price == '') {
      v_et = '<div class="zp-search-item"><div class="zp-search-item-title">' + v_no + '. <a target="_blank" href="' + v_it['link'] + '">' + v_it['title'] + '</a></div><div class="zp-search-item-desc">' + v_it['description'] + '</div><div class="zp-search-item-updated">' + v_it['updated'] + '</div>' + v_tag_div + '</div>';
    } else {
      v_et = '<div class="zp-search-item"><div class="zp-search-item-title">' + v_no + '. <a target="_blank" href="' + v_it['link'] + '">' + v_it['title'] + '</a></div><div class="zp-search-item-desc">' + v_it['description'] + '</div><div class="zp-search-item-price">' + v_price + '</div><div class="zp-search-item-updated">' + v_it['updated'] + '</div>' + v_tag_div + '</div>';
    }
    v_html += v_et;
  }
  document.getElementById('zp-hd-search-results').innerHTML = v_html + zp_powered_google_translate();
}

var g_used_change = '_!#$';

function zp_keyword_onchange(event) {
  var v_el = document.getElementById('zp-query');
  var v_cur_kw = zp_to_lower(v_el.value + event.key);
  if (v_cur_kw.length == 0) return true;
  if (g_used_change.length == 0 || v_cur_kw == g_used_change) {
    return;
  }
  g_used_change = v_cur_kw;
  for (var i = 0; i < g_keywords.length; i++) {
    v_sug_kw = g_keywords[i];
    if (v_sug_kw.indexOf(v_cur_kw) == 0) {
      v_el.value = v_sug_kw;
      if (event.preventDefault) event.preventDefault();
      return false;
    }
  }
  return true;
}

function zp_powered_google_translate() {
  if (g_lang == 'en') return '';
  return '<div class="zp-powered-google-translate">Powered by Google Translate</div>';
}

function zp_pick_object() {
  var v_obj = prompt("Your object? [" + g_obj_names + '] ');
  if (v_obj + '' == 'undefined' || v_obj + '' == 'null' || v_obj + '' == '') return;
  var v_obj_name = v_obj + '';
  var v_obj = '';
  for (var i = 0; i < g_obj_names.length; i++) {
    if (g_obj_names[i] == v_obj_name) {
      v_obj = g_obj_codes[i];
      break;
    }
  }
  if (v_obj == '') {
    alert('Object [ ' + v_obj_name + ' ] is not found!');
    return;
  }
  location = "https://zinospetrel.github.io/" + g_lang + '/' + v_obj + '/';
}

function zp_pick_language() {
  var v_lang = prompt("Your language? ['en'] ");
  if (v_lang + '' == 'undefined' || v_lang + '' == 'null' || v_lang + '' == '') return;
  if (g_lang_all.indexOf(v_lang) < 0) {
    alert("Language [ " + v_lang + " ] is not found!");
    return;
  }
  location = "https://zinospetrel.github.io/" + v_lang + '/' + g_obj + '/';
}
  </script>
</head>
<body onload="zp_load()">
  <div class="zp_page"><div class="zp-ad-left"><div class="zp-ad-left-inner"><div id="zp-ad-left" class="zp-ad-120x600"><iframe id="zp-ad-left-frame" class="zp-ad-left-frame" frameborder="0" src=""></iframe></div></div></div><div class="zp-ad-right"><div class="zp-ad-right-inner"><div id="zp-ad-right" class="zp-ad-120x600"><iframe class="zp-ad-right-frame" id="zp-ad-right-frame" frameborder="0" src=""></iframe></div></div></div><div class="zp-titlebar-cover"><div class="zp-titlebar-inner"><div class="zp-titlebar"><span>Zino's Petrel - Softwares you may need!</span></div></div></div><div style="height: 20px;">&nbsp;</div><div class="zp-toolbar"><input type="button" class="zp-button" value="Object" onclick="zp_pick_object()" >&nbsp;<input type="button" class="zp-button" value="Tag" onclick="zp_pick_tag()" >&nbsp;<input id="zp-query" type="text" class="zp-text" style="width: 330px" />&nbsp;<input type="button" class="zp-button" value="Search" onclick="zp_find()" />&nbsp;<input type="button" class="zp-button" value="Language" onclick="zp_pick_language()" ></div><div style="height: 10px"></div>==============================================	
  _____          _      ___     _           _ 	
 |_  (_)_ _  ___( )___ | _ \___| |_ _ _ ___| |	
  / /| | ' \/ _ \/(_-< |  _/ -_)  _| '_/ -_) |	
 /___|_|_||_\___/ /__/ |_| \___|\__|_| \___|_|	
==============================================	
           Softwares you may need!	
==============================================	
<div id="zp-hd-search-results" class="zp-hd-search-results">
</div>

  
  </div>
</body>
</html>
